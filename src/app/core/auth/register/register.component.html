<section class="border border-gray-200 shadow-xs rounded bg-grey-200 md:w-1/2 mx-auto p-4">
  <div class="title">
    <h2 class="mb-3 text-red-500 font-medium text-3xl text-center">Register Now</h2>
  </div>
  <form [formGroup]="registerForm" (ngSubmit)="submitRegisterForm()">

    <!-- name input -->
    <div class="mb-3">
      <label for="name" class="main-label">Name</label>
      <input formControlName="name" type="text" id="name" class="main-input" />

      @let nameControl = registerForm.get('name');

      @if(nameControl?.errors && nameControl?.touched){
      <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle"
        role="alert">
        <span class="sr-only">Danger</span>
        <div>
          <ul class="list-disc list-outside space-y-1 ps-2.5">
            @if(nameControl?.getError('required')){
            <li>Name Input is required</li>
            }@else if(nameControl?.getError('minlength')){
            <li>At least 3 characters</li>
            }@else if (nameControl?.getError('maxlength')) {
            <li>Less than 20 characters</li>
            }
          </ul>
        </div>
      </div>
      }
    </div>


    <!-- Email Input -->
    <div class="mb-3">
      <label for="email" class="main-label">Email</label>
      <input formControlName="email" type="email" id="email" class="main-input" />

      @let emailControl = registerForm.get('email');
      @if(emailControl?.errors && emailControl?.touched){
      <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle"
        role="alert">
        <span class="sr-only">Danger</span>
        <div>
          <ul class="list-disc list-outside space-y-1 ps-2.5">
            @if(emailControl?.getError('required')){
            <li>Email Input is required</li>
            }@else if(emailControl?.getError('email')){
            <li>Invaild Email</li>
            }
          </ul>
        </div>
      </div>
      }
    </div>

    <!-- password Input -->
    <div class="mb-3 relative">

      @let passwordControl = registerForm.get('password');
      <label for="password" class="main-label">Password</label>
      <input formControlName="password" [type]="flag=== true? 'password': 'text'" id="password" class="main-input" />
      <span (click)="togglePasswordType()" class="absolute top-0 end-2 translate-y-[160%] cursor-pointer">
        <i [class]="{
          'fa-eye':flag === true,
          'fa-eye-slash' :flag === false
        }" class="fas fa-eye"></i>
      </span>
      @if(passwordControl?.errors && passwordControl?.touched){
      <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle"
        role="alert">
        <span class="sr-only">Danger</span>
        <div>
          <ul class="list-disc list-outside space-y-1 ps-2.5">
            @if(passwordControl?.getError('required')){
            <li>Password Input is required</li>
            }@else if(passwordControl?.getError('pattern')){
            <li>Inclusion of at least one special character, e.g., ! @ # ?</li>
            }
          </ul>
        </div>
      </div>
      }
    </div>

    <!-- repassword input -->
    <div class="mb-3 relative">
      <label for="rePassword" class="main-label">Confirm Password</label>
      <input formControlName="rePassword" [type]="flag=== true? 'password': 'text'" id="rePassword"
        class="main-input" />
      <span (click)="togglePasswordType()" class="absolute top-0 end-2 translate-y-[160%] cursor-pointer">
        <i [class]="{
          'fa-eye':flag === true,
          'fa-eye-slash' :flag === false
        }" class="fas fa-eye"></i>
      </span>
      @if(registerForm.getError('mismatch') && registerForm.get('rePassword')?.touched ){
      <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle"
        role="alert">
        <span class="sr-only">Danger</span>
        <div>
          <ul class="list-disc list-outside space-y-1 ps-2.5">

            <li>Confirmation password is incorrect</li>

          </ul>
        </div>
      </div>
      }
    </div>

    <!-- phone input -->
    <div class="mb-3">
      <label for="phone" class="main-label">Phone Number</label>
      <input formControlName="phone" type="tel" id="phone" class="main-input" />

      @let phoneControl = registerForm.get('phone');
      @if(phoneControl?.errors && phoneControl?.touched){
      <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle"
        role="alert">
        <span class="sr-only">Danger</span>
        <div>
          <ul class="list-disc list-outside space-y-1 ps-2.5">
            @if(phoneControl?.getError('required')){
            <li>phone Input is required</li>
            }@else if(phoneControl?.getError('pattern')){
            <li>Must be an Egyptian phone number</li>
            }
          </ul>
        </div>
      </div>
      }
    </div>

    <div class="flex flex-wrap justify-end mb-3">
      <button [disabled]="isLoading()" type="submit" class="btn-main px-3">Register
        @if(isLoading()){
        <span>
          <i class="fas fa-spinner animate-spin"></i>
        </span>
        }

      </button>
    </div>
    @if(errorMessage()){
    <div class="flex p-4 mb-4 text-sm text-fg-danger-strong rounded-base bg-danger-soft border border-danger-subtle"
      role="alert">
      <span class="sr-only">Danger</span>
      <p>{{errorMessage()}}</p>
    </div>
    }


  </form>
</section>
